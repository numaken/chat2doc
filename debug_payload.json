{"conversationText":"了解です 👍\n先ほどの Claude Code 向け実装指示 を .md ファイル用に整形しました。\nこのままリポ直下に DEV_INSTRUCTIONS.md として追加してください。\n\n# DEV_INSTRUCTIONS.md\n\n## 概要\nこのファイルは Chat2Doc β版における「全部コピペ → 本文/コードを自動分離して整形」機能の実装指示です。  \nClaude Code 等の AI コードアシスタントが参照し、実装作業を行えるよう整理しています。\n\n---\n\n## タスク概要\n- ペーストされた生テキスト（チャットのコピペ）を解析\n- 本文とコードを自動的に分離\n- Markdown 形式で整形（本文＋コード付録）\n- スマホユーザー前提の簡単 UI を提供\n\n---\n\n## 1. 依存関係\nVitest を導入し、ユニットテストを実行可能にする。\n\n```bash\nnpm i -D vitest @types/node\n\n\npackage.json に追記:\n\n{\n  \"scripts\": {\n    \"test\": \"vitest run\",\n    \"test:watch\": \"vitest\"\n  }\n}\n\n2. ユーティリティ（取り込みパイプライン）\n\n新規: src/utils/ingest.ts\n\n生テキストから UI ノイズを除去\n\nインデント/シェル行コードも抽出\n\n本文/コードを分離\n\nMarkdown 整形関数を提供\n\n（省略: 実装コードはこのファイルに追加する）\n\n3. ペースト UI コンポーネント\n\n新規: src/components/PasteIngestor.tsx\n\ntextarea に「全部ペースト」\n\n自動で本文/コードを分離\n\nタブで切り替え表示（整形プレビュー／本文のみ／コード）\n\nコピー機能（本文／コード／Markdown全体）\n\niOS Safari で失敗時は prompt フォールバック\n\n4. ページ追加\n\n新規: src/app/import/page.tsx\n\n/import ページを作成\n\nPasteIngestor を読み込み表示\n\nシンプルな説明文とUIを配置\n\n5. テスト\n\n新規: src/utils/ingest.test.ts\n\nフェンス付きコードの検出\n\nインデント塊の検出\n\nUIノイズの除去\n\nMarkdown整形（付録の付与）\n\n6. 受け入れ基準\n\nスマホ/PC 両対応\n\n全文ペーストで本文/コード分離が自動で行われる\n\nUIノイズ（「Copy code」「Open in…」「Regenerate…」等）が本文に混入しない\n\nフェンス・インデント・シェル行 ($, PS>, #) のコード検出が機能\n\n「本文＋付録をMarkdownでコピー」ボタンが動作する（iOS Safari は prompt フォールバック）\n\nnpm run test がグリーン\n\n7. コミット/PR\n\nブランチ名: feat/mobile-paste-ingest\n\nコミット粒度:\n\nchore(test): add vitest and basic config\n\nfeat(ingest): add sanitize/extract/toMarkdown pipeline\n\nfeat(ui): add PasteIngestor component and /import page\n\ntest(ingest): add unit tests for fences/indent/ui-noise\n\nPR タイトル:\nfeat: モバイル前提の「全部コピペ→整形」β機能\n\nPR 本文: 動機、仕様、UIスクショ、テスト観点、既知の限界を簡潔に記載\n\n8. 備考\n\nリポは Next.js + TypeScript の App Router 構成。既存コードとの衝突はほぼ無い。\n\nREADME は最小構成のままなので、PR後に /import ページの使い方 を追記推奨。\n\n\n---\n\n👉 このファイルを `DEV_INSTRUCTIONS.md` としてリポ直下に置いてください。  \nClaude Code に「この指示ファイルに従って実装して」と伝えれば、ブランチ作成〜PRまで通せます。  \n\nご希望なら、私の方で **実際に書き込むコード全文**（ingest.ts, PasteIngestor.tsx, page.tsx, ingest.test.ts）を `.md` に追記する版も作れます。どうしますか？"}